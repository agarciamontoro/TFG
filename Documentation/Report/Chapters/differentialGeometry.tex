\chapter{Introduction to differential geometry}

\section{Differentiable manifolds}

Roughly speaking, a manifold is a topological space that, locally, looks like the Euclidean space $\R^n$. This similitude is essential, and will let us control the manifold as if we were working in the Euclidean space; generally, the definitions concerning manifolds and the properties proved from them will be based on the known properties of $\R^n$.

The following definition specifies the formal concept of a topological manifold:

\begin{definition}[N-dimensional topological manifold]
    Let $M^n$ be an $n$-dimensional topological space. The space $M^n$ is called a topological manifold if the following properties are satisfied:
    \begin{enumerate}
        \item $M^n$ is locally homeomorphic to $\R^n$. \label{def:manifold:homeo}
        \item $M^n$ is a Hausdorff space. \label{def:manifold:haussdorf}
        \item $M^n$ has a countable topological basis. \label{def:manifold:basis}
    \end{enumerate}
\end{definition}

The first property states that, for every point $p \in M^n$, there exists an open neighbourhood $U \subset M^n$ of $p$ and a homeomorphism
\[
    h \colon U \to V
\]

with $V \subset \R^n$ an open set.

One could think that the Hausdorff property is redundant, as the local homeomorphism may imply this topological characteristic. This is not true, and the usual counterexample is the line with two origins.

Let $M = \R \cup p$ be the union of the real line and a point $p \notin \R$. Define a topology in this space with $\R \subset M$ as an open set and the neighbourhoods of $p$ being the sets $(U \setminus \{0\}) \cup \{p\}$, where $U$ is a neighbourhood of $0 \in \R$. This space is locally Euclidean but not Hausdorff: the intersection of any two neighbourhoods of the points $0 \in \R$ and $p$ is non-empty.

\begin{figure}[bth]
    \myfloatalign
    \begin{tikzpicture}
      \draw[thick] (-5,0) -- (-0.05,0);
      \draw[very thick,<->] (-1,0) -- (-0.05,0);
      \draw[fill] (0,0) circle [radius=0.05];
      \node[below] at (0,0) {0};
      \draw[thick] (0.05,0) -- (5,0);
      \draw[very thick,<->] (0.05,0) -- (1,0);
      \node[right] at (5,0) {$\R$};

      \draw[fill,Maroon] (0,0.5) circle [radius=0.05];
      \node[right,Maroon] at (0,0.5) {$p$};
    \end{tikzpicture}
    \caption[Line with two origins]{Line with two origins.}
    \label{fig:2origin}
\end{figure}

The last property of the definition will be proven key in our study, as it will let us define metrics on the manifold.

\subsection{Charts}

The main characteristic of the manifolds, its ressemblance\unsure{Is this word ok?} to the Euclidean space, have to be exploited in order to understand the nature of the mathematical object.

The conceptual space where the manifolds live can be thought as the Plato's world of Ideas\unsure{Maybe too much}, where everything is pure but cannot be understood without studying particular examples.

The idea of the manifold will be understood, then, taking pieces of the manifold and lowering\unsure{Mmm... not sure about the word.} them to the real word; \ie, the Euclidean space, where we will be able to \emph{physically} touch the manifold.

The essential tool to make this happen will be the coordinate charts. These tools are like prisms to see the manifold from the Euclidean perspective, and they will let us grasp the nature of the ideal concept of a manifold.

\begin{definition}[Coordinate chart]
    A \emph{coordinate chart} ---or \emph{coordinate system}--- in a topological manifold $M^n$ is a homeomorphism $h \colon U \to V$ from an open subset of the manifold $U \subset M$ onto an open subset of the Euclidean space $V \subset \R^n$.

    We call $U$ a \emph{coordinate neighbourhood} in $M$.
\end{definition}

One single chart may not cover the whole manifold. In order to completely understand it, we need a set of charts that describe it completely.

\begin{definition}[Coordinate atlas]
    Let
    \[
    A = \{h_\alpha \colon U_\alpha \to V_\alpha / \alpha \in I\}
    \]
    be a set of coordinate charts in a topological manifold $M^n$, where $I$ is a family of indices and the open subsets $U_\alpha \subset M$ are the corresponding coordinate neighbourhoods.

    $A$ is said to be an \emph{atlas} of M if every point is covered with a coordinate neighbourhood; \ie, if $\cup_{\alpha \in I} U_\alpha = M$.
\end{definition}

% Examples?

\subsection{Differentiable structures}

The concept of manifold is quite general and includes a vast set of examples. We can impose, however, some properties on the smoothness of the manifold to restrict the objects we will work with.

This section introduces the notion of differentiable structure, whose definition is key in the later description of differentiable manifolds, the core concept of this chapter.

The first question in this study is the following: a chart describe perfectly a single piece of the manifold, but what happens when the domains of a pair of charts overlap? The following two definitions specify the concepts involved in this question.

% TODO: Add the usual conmutative diagram for the transition maps

\begin{definition}[Transition map]
    Let $M^n$ be a manifold and $(U, \phi)$, $(V, \psi)$ a pair of coordinate charts in $M^n$ with overlapping domains, that is:
    \[
        U \cap V \neq \emptyset
    \]

    The homeomorphism between the open sets of the Euclidean space $\R^n$,
    \[
        \psi \circ \phi^{-1} \colon \phi(U \cap V) \to \psi(U \cap V),
    \]
    is called a \emph{transition map}.
\end{definition}

\begin{definition}[Smooth overlap]
    Two charts $(U, \phi)$, $(V, \psi)$ are said to overlap smoothly if their domains are disjoint ---\ie, if $U \cap V  = \emptyset$--- or if the transition map $\psi \circ \phi^{-1}$ is a diffeomorphism.
\end{definition}

The description of two charts that overlap smoothly can be naturally extended to the concept of smooth atlas, that will make possible to do calculus on the manifold.

\begin{definition}[Smooth coordinate atlas]
    An atlas $A$ is said to be smooth if every pair of charts in $A$ overlap smoothly.
\end{definition}

But what happens if we define two different atlases in the manifold? Will the calculus depend on this choice? Fortunately we can find, for each manifold, one particular atlas that contain every other atlas defined there. It is formally described in the following definition and its uniqueness is proved in \autoref{prop:max-atlas-uniq}.

\begin{definition}[Complete atlas]
    A \emph{complete atlas} ---or \emph{maximal atlas}--- on $M^n$ is a smooth atlas that contains each coordinate chart in $M^n$ that overlaps smoothly with every coordinate chart in $M^n$.
\end{definition}

\begin{proposition}[Complete atlas uniqueness]
    Let $M^n$ be a topological manifold.

    \begin{itemize}
        \item Every smooth atlas on $M^n$ is contained in a complete atlas.
        \item Two smooth atlas on $M^n$ determine the same complete atlas if and only if its union is a smooth atlas.
    \end{itemize}
    \label{prop:max-atlas-uniq}
\end{proposition}


\begin{proof}
 	Let $A$ be a smooth atlas on $M^n$ and define $A'$ as the set of all $n$-dimensional coordinate charts that overlaps smoothly with every chart on $A$. We are going to see that $A'$ is a complete atlas.
 	
 	It is trivial to see that $A'$ is an atlas, since $A \subset A'$ and $A$ is an atlas. The smoothness of the atlas is a consequence of the fact that smoothness is a local property \fixme{Finish.}
\end{proof}

\begin{definition}[Differentiable manifold]
	A \emph{differentiable manifold} is a pair $(M, A)$, where $M$ is a topological manifold and $A$ is a complete atlas.
\end{definition}

\begin{example}
	The concept of differentiable manifold is, probably, the most important idea throughout all this work. Let us see then some examples in order to better understand that these spaces we will going to work with are not that abstract ---although they can be---.
	
	\begin{enumerate}
		\item The Euclidean space $\R^n$ is a differentiable manifold considering the identity map as its atlas.
		\item Every \emph{smooth surface}\footnote{We consider the definition of smooth surface seen in a basic course of curves and surfaces: a subset of $\R^3$ such that every point is covered by the image of a differentiable map whose restriction to an open subset containing the point is an homeomorphism and whose differential is a monomorphism.} of $\R^3$ is an example of a differentiable manifold. As a subset of $\R^3$, the local homeomorphism, the Hausdorff property and the countable basis are trivial. Furthermore, the definition of smooth surface gives us for free the complete atlas.
		\item The sphere $S^n$ is an $n$-dimensional differentiable manifold. As an atlas we can consider the union of the two stereographic projections onto $\R^n$ from the north and south poles.
	\end{enumerate}
\end{example}

\subsection{Differentiable maps on manifolds}

The concept of differentiable maps on manifolds is the first one in which we are going to generalize concepts from the Euclidean space using the local homeomorphism.

The idea is simple: we know how to build differentiable maps between open sets of $\R^n$, so we are going to define differentiability between manifolds going through the images of the coordinate neighbourhoods of the points.

As the differentiability is a local concept, being the manifolds locally Euclidean is enough to generalize it.

\begin{definition}
	Let $F \colon M \to N$ be a map between two differentiable manifolds: $M$ and $N$. F is said to be \emph{differentiable} or \emph{smooth} if the following conditions are satisfied:
	\begin{enumerate}
		\item There is a chart $(U, \varphi)$ for every point $p \in M$ and another one, $(V, \psi)$ for its image, $F(p) \in N$, such that $p \in U$, $F(p) \in V$ and $F(U) \subset V$.
		\item The map $\psi \circ F \circ \varphi^{-1} : \varphi(U) \to \psi(V)$ is differentiable in the usual sense.
	\end{enumerate}
\end{definition}

This definition includes also the case in which $M$, $N$ or even both of them are the euclidean spaces $\R^m$ and $\R^n$. There is no ambiguity between this and the euclidean definition of smoothness, as one can take the identity map as coordinate chart when one of the manifolds is an euclidean space and the usual definition will be found.

From this definition it is trivial to prove that, if a family of smooth maps cover a manifold with the maps being equal where their images overlap, a unique smooth function that is equal to each individual map on its image can be built.

Furthermore, it is easy to see that the identity of a manifold, the coordinate charts and the composition of smooth functions are smooth. Smoothness also implies continuity.

As well as the definition of smoothness, the definition of diffeomorphism can be generalized to manifolds, being \autoref{def:diffeo} its formal expression.

\begin{definition}[Diffeomorphism]
	\label{def:diffeo}
	A function $f \colon M \to N$ between two manifolds is said to be a \emph{diffeomorphism} if it is a smooth bijective map with its inverse being also smooth.
	
	When there exists such map, $M$ and $N$ are said to be diffeomorphic.
\end{definition}

\subsection{Tangent space}

Once we know what a differentiable function is, the next step we need to take in order to set up a proper place to do calculus on manifolds is to define the differential.

First, let us remember some concepts about regular surfaces on $\R^3$. Let $S, S'$ be two regular surfaces on $\R^3$ and let $f \colon S \to S'$ be a differentiable map between them. The differential of $f$ on $p \in S$ was defined as a function that transforms tangent vectors to the first surface into tangent vectors to the second,
\[
	(df)_p \colon T_p S \to T_{f(p)} S'.
\]

What can we learn from this? Our goal is to define the differential of a differentiable map between \emph{manifolds}. It would be ideal that it generalizes the notion we already have about differentials on surfaces, so it is mandatory to first generalize the concept of tangent plane.

The tangent plane to a regular surface on one of its points $p$ is, as we know, the vector subspace of all the tangent vectors to the point. This vector space was shown to be isomorphic to the space of directional derivatives on $p$. Instead of trying to generalize the concept of tangent vector, the idea we will follow is to extend the notion of directional derivatives, building the new \emph{tangent plane}-like space from these.

The usual directional derivative is a linear map that satisfies the Leibniz rule, so we are going to define a tangent vector to a manifold as an axiomatization of this concept: the derivation.

From now on, we will note the set of all the smooth real-valued functions on a manifold $M$ as $\mathcal{F}(M)$:
\[
\mathcal{F}(M) \defeq \{f \colon M \to \R / \textrm{f is smooth} \}
\]

\begin{definition}[Derivation]
	Let $p$ be a point on a manifold $M$. A \emph{derivation} at $p$ is a map
	\[
		D_p \colon \mathcal{F}(M) \to \R
	\]
	that is linear and leibnizian; \ie, that satisfies the following properties:
	\begin{enumerate}
		\item $D_p(af + bg) = aD_p(f) + bD_p(g)$, where $a,b \in \R$ and $f,g \in \mathcal{F}(M)$.
		\item $D_p(fg) = D_p(f)g(p) + f(p)D_p(g)$, where $f,g \in \mathcal{F}(M)$.
	\end{enumerate}
\end{definition}

Taking into account the one-to-one correspondence between tangent vectors and derivations on the euclidean case ---the directional derivative is actually a derivation---, the idea of the generalization of tangent vector on \autoref{def:tangentvector} is more clear now.

\begin{definition}[Tangent vector]
	\label{def:tangentvector}
	Let $M$ be a manifold and $p \in M$ one of its points. A \emph{tangent vector to M on p} is a derivation at p.
\end{definition}

It is trivial to see that the directional derivative is a tangent vector to the well-known manifold $\R^n$. Being this \emph{derivation --- tangent vector} duality clear, it is now natural to arrive to \autoref{def:tangentspace}.

\begin{definition}[Tangent space]
	\label{def:tangentspace}
	Let $M$ be a manifold and $p \in M$ one of its points. The \emph{tangent space to $M$ at $p$}, noted as $T_p M$, is the set of all tangent vectors to $M$ on $p$; \ie, the family of derivations at $p$.
\end{definition}

\begin{remark}
	$T_p M$ is a vector space with the usual definitions of function addition and product by a scalar, and if $x \colon U \to M$ is a chart that covers $p$, $\{ \frac{\partial}{\partial x^1}\bigr|_p, \dots, \frac{\partial}{\partial xn}\bigr|_p\}$\footnote{We note by $\frac{\partial}{\partial xi}\bigr|_p \colon \mathcal{F}(M) \to \R$ the function that maps every smooth function $f$ to the value of its derivative with respect to the $i$-th coordinate evaluated at $p$.} is its associated basis on $T_p M$. See \cite[p. 8]{docarmo79} for details.
\end{remark}

As for every vector space, we can define its dual version.
\begin{definition}[Cotangent space]
	Let $M$ be a manifold and $p \in M$ one of its points. The \emph{cotangent space to $M$ at $p$}, denoted as $T_p M^*$ is the dual space of the vector space $T_p M$.
	
	The elements $\omega \in T_p M^*$ are called \emph{one-forms} or \emph{covectors} on $p$.
\end{definition}

The extension of the idea of differential is now straightforward: we have just to remember how the differential on the euclidean case can be defined from derivations and repeat the nearly exact same definition on manifolds.

\begin{definition}[Differential or pushforward]
	Let $M$ and $N$ be two manifolds and let $F \colon M \to N$ be a smooth map.
	
	Consider, for each $p \in M$, the function
	\begin{align*}
		dF \colon T_p M &\to T_{F(p)} M \\
		X &\mapsto dF(X),
	\end{align*}
	that maps each tangent vector to $M$ at $p$, $X$, to a tangent vector to $N$ at $F(p)$, $F_*X$, defined as follows:
	\begin{align*}
		dF(X) \colon \mathcal{F}(M) &\to \R \\
		f &\mapsto X(f \circ F).					
	\end{align*}

	The function $dF$ is the differental of $F$ at $p$, which is also known as the \emph{pushforward} of $p$ by $F$.
		   																	
\end{definition}

On the $\R^3$ surfaces scenario, it is not odd to define tangent vectors using their close relation with the curves on the surface. In order to obtain a better understanding of the manifolds tangent space, let us see what a curve on a manifold is and how a tangent vector on a point can be identified with them.

\begin{definition}[Curve on a manifold]
	% Roldan, 21
	Let $M$ be a manifold and $I \subset R$ an open set on $\R$. A \emph{curve on $M$} is a continuous map
	\[
		\gamma \colon I \to M.
	\]
\end{definition}

Every smooth curve is differentiable in the manifold sense, and having understood the duality between derivations and tangent vectors, we can naturally obtain the tangent vector to a curve on an instant $t_0\in I$ by applying the definition we just saw.

\begin{proposition}[Tangent vector to a curve]
	\label{pro:tangcurve}
	The tangent vector to a curve $\gamma \colon I \to M$ on an instant $t_0 \in I$, noted as $\gamma'(t_0) \in T_{\gamma(t_0)} M$ is the pushforward of $t$ by $\gamma$; \ie, the tangent vector to $M$ defined as
	\begin{align*}
		\gamma'(t_0) \colon \mathcal{F}(M) &\to \R \\
		f &\mapsto \frac{d}{dt} \left( f \circ \gamma \right) (t_0)
	\end{align*}
\end{proposition}

\autoref{pro:tangcurve} tells us how to assign a vector from the tangent space of a manifold $M$ to every curve $\gamma$ on it, but is there a curve that could be assigned to every tangent vector on $M$?; \ie, is every element of the tangent space to $M$ the tangent vector of a curve? The following result answers this question.

\begin{theorem}
	% Roldan, 22
	Let $p$ be a point on a manifold $M$. There exists, for every $X \in T_p M$, a smooth curve on $M$ whose tangent vector is $X$.
\end{theorem}

\begin{proof}
	If $\varphi$ is the manifold chart that covers $p$ and $X = (X^1, \dots, X^n)$ are the coordinates of an element of the tangent space, then we can define
	\[
		\gamma(t) = \varphi^{-1}(tX^1, \dots, tX^n)
	\]
	in such a way that it is smooth on $\gamma(0) = p$ and that its tangent vector is $\gamma'(0) = X$.
\end{proof}

\section{Vector fields}

In our journey to understand geometry on manifolds, one key step is to generalize what we called directional derivative in the euclidean spaces. The directional derivative of a function on a point gives us information on how the function changes when moving in the given direction; the concept of geodesic will need of this idea, but first we have to set up some definitions and technical results.

Let us start, then, by generalizing the concept of vector field to manifolds. As in the euclidean sense, we can define a \emph{vector field} on a manifold $M$ as a correspondence $X$ that maps every point $p$ on the manifold to a vector $X(p)$ in the tangent space $T_p M$.

To formalize this concept, we should first define the set of the tangent spaces at every point of the manifold, which is the target set of the map we just described. This definition can be found on \cite[p. 26]{oneill83} and \cite[p. 13]{docarmo79}

\begin{definition}[Tangent bundle]
	Let $M$ be a smooth manifold and let $A = \{(U_\alpha, h_\alpha)\}$ be a smooth atlas on $M$.
	
	Consider now the set
	\[
		TM = \bigcup_{p \in M} T_p M,
	\]
	where the projection $\pi \colon TM \to M$ maps every tangent vector $v$ to $p$, the manifold point such that $v \in T_p M$.

	We can furnish $TM$ with the atlas $A' = \{(\pi^{-1}(U_\alpha), h'_\alpha)\}$, where $h'_\alpha$ defines the coordinates of every point $v \in TM$, as the union of the coordinates of $p (= \pi(v))$ in $U_\alpha$ with the coordinates of $v$ in the associated basis of $T_p M$; \ie, if $(x^1, \dots, x^n)$ are the coordinate functions that assigns every point $p \in M$ to its coordinates on $\R^n$, the coordinates of the elements of $TM$ are
	\[
		(x^1 \circ \pi, \dots, x^n \circ \pi, \frac{\partial}{\partial {x^1}}, \dots, \frac{\partial}{\partial {x^n}}),
	\]
	where $\frac{\partial}{\partial {x^i}} \colon \pi^{-1}(U_\alpha) \to \R$ are the coordinate functions of the tangent space, given by $\frac{\partial v}{\partial {x^i}} = v(x^i)$.
	
	$TM$ is called the tangent bundle of $M$.
\end{definition}

It can be proved ---see \cite[Example 2.1]{docarmo79} or \cite[pp. 26, 27]{oneill83}--- that $A'$ is, indeed, an atlas and, therefore, that the tangent bundle of every smooth manifold of dimension $n$ is in turn a smooth manifold of dimension $2n$.

\begin{remark}[Cotangent bundle]
	The dual version of the tangent bundle, the \emph{cotangent bundle}, can also be defined, and has the expected properties. It is defined as
	\[
		T^*M = \bigcup_{p \in M} T_p M^*.
	\]
\end{remark}

This recently defined space is the target set of what we described as a vector field. \autoref{def:vectorfield} formalize this idea.

\begin{definition}[Vector field]
	\label{def:vectorfield}
	A \emph{vector field} $X$ in a smooth manifold $M$ is a map
	\[
		X \colon M \mapsto TM
	\]
	that maps every point $p$ on the manifold to a vector $X(p) \in T_p M$, often noted as $X_p$.
\end{definition}

From now on, we will note the set of smooth vector fields on $M$ as $\mathfrak{X}(M)$.

Analogously, one can define the set of smooth covector fields, that is, the set of functions assigning a one-form to each point of the manifold:
\[
	\mathfrak{X}^*(M) = \left\{ \begin{aligned}
		\theta \colon M &\to T^*M \\
		p &\mapsto \theta_p \in T_p M^*
	\end{aligned} \Bigg/ \theta \textrm{ is smooth} \right\}
\]

Another interesting way to look at the vector fields, shown on \cite[p. 23]{docarmo79}, consists on considering again the idea of the vectors as directional derivatives: a vector field $X$ on $p$ is then a map that receives a smooth function $f$ on $M$ and gives us another function on $M$, noted as $Xf$ and defined as follows:
\[
	(Xf)(p) = X_p(f).
\]

One can define an interesting operation on vector fields considering them as derivations: the bracket operation.

\begin{definition}[Bracket operation]
	Let $V$ and $W$ be vector fields on $M$.
	
	The bracket operation on $V$ and $W$, noted as $[V, W]$ is the vector field defined as
	\[
		[V, W] = VW - WV,
	\]
	which is an application that maps every $f \in \mathcal{F}(M)$ to the function $V(Wf) - W(Vf)$.
\end{definition}

The proof that $[V,W]$ is indeed a vector field can be found at \cite[p. 24]{docarmo79}.

Going ahead with the generalization of euclidean concepts to the manifolds, we can define what a vector field along a curve is:

\begin{definition}[Vector field along a curve]
	Let $c \colon I \to M$ be a curve on a manifold defined on the open subset $I \subset \R$. A \emph{vector field along the curve $c$}, $V$, is a function
	\[
	V \colon I \mapsto TM
	\]
	that maps every instant $t \in I$ to a vector $X(c(t)) \in T_{c(t)} M$, where $X$ is a vector field.
\end{definition}

\begin{example}
	One of the most interesting examples of vector fields along a curve is the velocity of the curve itself. Let $\gamma \colon I \to \M$ be a smooth curve on $M$. The application that maps every instant to the tangent vector to the curve at that instant,
	\begin{align*}
		\gamma' \colon I &\to TM \\
		t &\mapsto \gamma'(t),
	\end{align*}
	where $\gamma'(t)$ is defined on \autoref{pro:tangcurve}, is a vector field along $\gamma$.
\end{example}

\section{Tensor Fields}

Just as we introduce the concept of vector fields on \autoref{def:vectorfield}, a similar concept arises now: the tensor fields.

We are going to introduce this concept following the line of reasoning on \cite[Ch. 2]{oneill83}.

\begin{definition}[Tensor field]
	A tensor field $A$ on a manifold $M$ $r$ times contravariant and $s$ times covariant is a classic tensor on the vector space $\mathfrak{X}(M)$, whose scalar field is $\mathfrak{F}(M)$, the set of smooth real valued functions on $M$:
	\[
		A \colon \underbrace{\mathfrak{X}^*(M) \times \dots \times \mathfrak{X}^*(M)}_{\text{r copies}} \times \underbrace{\mathfrak{X}(M) \times \dots \times \mathfrak{X}(M)}_{\text{s copies}} \to \mathfrak{F}(M).
	\]
	
	As usual, we denote by $\tensors_{(r,s)}(M)$ the set of all tensor fields of type $(r,s)$ on a manifold $M$.
\end{definition}

It is interesting to study that the name we gave to this concept is not random: indeed, we can see a tensor field $A$ as a proper \emph{field}, in which every point of the manifold is mapped to a tensor.

The basis of this idea comes from the following result, whose proof can be studied on \cite[Ch. 2, Proposition 2]{oneill83}.

\begin{proposition}
	Let $p \in M$ be a point on a manifold $M$ and $A \in \tensors_{(r,s)}(M)$ a tensor field.
	
	Let $\theta^i$ and $\bar{\theta}^i$ be covector fields for every $i \in \{1, \dots, r\}$, and such that
	\[
		\theta^i_{|_p} = \bar{\theta}^i_{|_p} \quad \forall i \in \{1, \dots, r\}.
	\]
	
	Similarly, let $X_i$ and $\bar{X}_i$ be vector fields for every $i \in \{1, \dots, s\}$, and such that
	\[
		X_{i|_p} = \bar{X}_{i|_p} \quad \forall i \in \{1, \dots, s\}.
	\]
	
	Then,
	\[
		A(\theta^1, \dots, \theta^r, X_1, \dots, X_s)(p) = A(\bar{\theta}^1, \dots, \bar{\theta}^r, \bar{X}_1, \dots, \bar{X}_s)(p).
	\]
\end{proposition}

This result let us consider each tensor field $A \in \tensors_{(r,s)}(M)$ as the following field on $M$, which is denoted in the same exact way:
\begin{align*}
	A \colon M &\to \tensors_{(r,s)}(M) \\
	p &\mapsto A_p \colon \underbrace{T_p M^* \times \dots \times T_p M^*}_{\text{r copies}} \times \underbrace{T_p M \times \dots \times T_p M}_{\text{s copies}} \to \R
\end{align*}
where the tensor $A_p$, now defined on the tangent and cotangent space, is the following mapping:
\[
	(\alpha^1, \dots, \alpha^r, x_1, \dots, x_s) \xmapsto{A_p} A(\theta^1, \dots, \theta^r, X_1, \dots, X_s),
\]
where $\theta^i$ is any covector field such that $\theta^i_{|_p} = \alpha^i$ and $X_i$ is any vector field such that $X_{i|_p} = x_i$ for every $i \in \{1, \dots, n\}$.

The operation involving tensors, the definition of the tensor components, the tensor contraction and all other classic results thoroughly studied in \autoref{chapter:tensoralgebra}  hold also here for the tensor fields on a manifold.

\section{Connections on Manifolds}

In this section we will define a connection on a manifold, which in turn will give us the tools to generalize the concept of directional derivative arriving to the definition of covariant derivative.

Finally, when adding a metric to the smooth manifold, an interesting connection will appear naturally: the Levi-Civita connection, whose interest on the study of the geodesic will be shown.

\subsection{Affine connections}

The following definitions and results can be found at \cite[Ch. 2, Section 2]{docarmo79} and \cite[pp. 59-67]{oneill83}.

\begin{definition}[Affine connection]
	\label{def:affineconnection}
	% doCarmo, 41
	An affine connection $\nabla$ on a smooth manifold $M$ is a map
	\[
		\nabla \colon \mathfrak{X}(M) \times \mathfrak{X}(M) \to \mathfrak{X}(M),
	\]
	noted as $(X, Y) \xrightarrow{\nabla}\nabla_X Y$, that satisfies the following properties:
	\begin{enumerate}
		\item $\nabla_{fX + gY} Z = f\nabla_X Z + g\nabla_Y Z$,
		\item $\nabla_X(Y+Z) = \nabla_X Y + \nabla_X Z$,
		\item $\nabla_X (fY) = f\nabla_XY + (Xf) Y$,
	\end{enumerate}
	where $X,Y,Z \in \mathfrak{X}(M)$ and $f,g \in \mathcal{F}(M)$.
\end{definition}

On \cite[Chapter 2, Remark 2.3]{docarmo79} we can see how the last property of \autoref{def:affineconnection} let us show that the affine connection is a local concept. Consider a coordinate system $(x^1, \dots, x^n)$ around $p$ and describe the vector fields $X, Y$ as follows:
\[
X = \sum_i x^i X_i, \qquad Y = \sum_j y^j X_j,
\]
where $X_i = \frac{\partial}{\partial x^i}$. Then, we can write
\[
\nabla_x Y = \sum_i x^i \nabla_{X^i}\left(\sum_j y^j X_j \right) = \sum_{ij} x^i y^j \nabla_{X^i} X_j + \sum_{ij} x^i (X_i y^j) X_j.
\]

As $(\nabla_{X^i} X_j)_p \in T_p M$, and using that $\{X_1(p), \dots, X_n(p)\}$ is a basis of $T_p M$, we can write the coordinate expression of $\nabla_{X^i} X_j$ as follows:
\[
	\nabla_{X^i} X_j = \sum_k \Gamma^k_{ij} X_k,
\]
where the functions $\Gamma^k_{ij}$ are necessarily differentiable. Finally, we can write
\[
\nabla_X Y = \sum_k \left( \sum_{ij} x^i y^j \Gamma^k_{ij} + X(y^k) \right) X_k.
\]

This shows that $\nabla_X Y(p)$ depends on $x^i(p)$, $y^k(p)$ and the derivatives $X(y^k)(p)$.

This is a somewhat technical definition, but as shown in \autoref{pro:covariantderivative}, it provides us with the concept of covariant derivative, which will be shown to be a generalization of the directional derivative on $\R^n$.

\begin{proposition}[Covariant derivative]
	\label{pro:covariantderivative}
	% doCarmo, 42
	Let $M$ be a smooth manifold with an affine connection $\nabla$ and let $c \colon I \to M$ be a smooth curve. Then there is a unique function that maps each vector field $V$ along $c$ onto another vector field along $c$, called \emph{covariant derivative of $V$ along $c$}, and noted as $\frac{DV}{dt}$, that satisfies the following properties:
	\begin{enumerate}
		\item $\frac{D}{dt}(V+W) = \frac{DV}{dt} + \frac{DW}{dt}$.
		\item $\frac{D}{dt}(fV) = \frac{df}{dt}V + f\frac{DV}{dt}$.
		\item If $V$ is described as $V(t) = X(c(t))$, where $X \in \mathfrak{X}(M)$, then \[\frac{DV}{dt} = \nabla_{\frac{dc}{dt}} X.\]
	\end{enumerate}
	where $W$ is another vector field along $C$ and $f \in \mathcal{F}(M)$.
\end{proposition}

\autoref{pro:covariantderivative} gives us an actual derivation on vector fields along smooth curves. The concept of connection, whose definition may appear artificial at first, shows now its interest: it provides us with a way of derivating vectors along curves; \ie, we have now the possibility to consider the concept of \emph{acceleration} on curves on manifolds.

\begin{proof}[Proof of \autoref{pro:covariantderivative}]
	Assuming the existence of such a map, considering the local coordinates of $V$ and using the properties that define the covariant derivative, one can prove that it is unique.
	
	Let $x \colon U \subset \R^n \to M$ be a coordinate chart that assigns the local expression $(x^1(t), \dots, x^n(t))$ to the curve $c$. If we note $X_i = \pd{}{x^i}$ and write the field $V$ locally as $V = \sum_j v^j X_j$, applying all three properties of the covariant derivative we conclude that
	\begin{equation}
	\label{eq:covariantderivative}
		\frac{DV}{dt} = \sum_j \frac{d v^j}{dt} X_j + \sum_{i,j} \frac{d x^i}{dt} v^j \nabla_{X_i} X_j,
	\end{equation}
	that is, the covariant derivative is unique.
	
	On the other hand, defining the covariant derivative as in \autoref{eq:covariantderivative}, its existence and the satisfaction of the defined properties is straightforward.
\end{proof}

The remaining technical details of the previous reasoning can be found on \cite[p. 43]{docarmo79}, from where this proof was taken.

\begin{definition}[Parallel vector field]
	% doCarmo, 44
	% oNeill, 66
	Let $M$ be a smooth manifold furnished with an affine connection $\nabla$. A vector field $V$ along a curve $c \colon I \to M$ is called \emph{parallel} whenever $\frac{DV}{dt} = 0$ for every $t \in I$.
\end{definition}

\begin{proposition}[Parallel transport]
	% doCarmo, 44
	% oNeill, 66
	Let $M$ be a smooth manifold furnished with an affine connection $\nabla$. Let $c \colon I \to M$ be a smooth curve on $M$ and $V_0$ a tangent vector to $M$ on $c(t_0)$; \ie, $V_0 \in T_{c(t_0)} M$.
	
	Then, there exists a unique parallel vector field $V$ along $c$ such that $V(t_0) = V_0$. We call $V$ the \emph{parallel transport of $V(t_0)$ along $c$}.
\end{proposition}

\begin{proof}
	\unsure{Write it if there's time}
	See \cite[Proposition 2.6 on section 2.2]{docarmo79}
\end{proof}

\subsection{Semi-Riemannian connections}

This section follows the line of reasoning on \cite[Ch. 2, Section 3]{docarmo79}.

Until now, the geometry of \fixme{Introduction stating that a metric is now needed.}

\begin{definition}[Metric compatible connection]
	% doCarmo, 45
	Let $M$ be a smooth manifold furnished with an affine connection $\nabla$ and a semi-Riemannian metric $g$.
	
	The connection is said to be compatible with the metric when, for every smooth curve $c$ and for every pair of vector fields $P, P'$ along $c$, the product of the vector fields is constant:
	\[
		g(P, P') = constant
	\]
\end{definition}

This definition will let us compute the derivative of the vector fields product using the Leibniz rule, as shown in the following proposition.

\begin{proposition}[Derivative of the metric on vector fields]
	% doCarmo, 45
	\label{pro:compatibleleibniz}
	Let $M$ be a semi-Riemannian manifold furnished with a connection $\nabla$ compatible with the metric $g$. Let $c \colon I \to M$ be a smooth curve and $V$ and $W$ two vector fields along $c$. Then, the Leibniz rule is satisfied when computing the derivative of the vector fields product; that is:
	\[
		\frac{d}{dt}g(V,W) = g(\frac{DV}{dt}, W) + g(V, \frac{DW}{dt}), t \in I.
	\]
\end{proposition}

\begin{proof}
	See \cite[Ch. 2, Section 3, Proposition 3.2]{docarmo79}.\unsure{Write if time}
\end{proof}

In fact, we can redefine what a connection compatible with a metric is using \autoref{pro:compatibleleibniz}.

\begin{corollary}[Compatible connection redefinition]
	% doCarmo, 46
	An affine connection on a semi-Riemannian manifold $M$ is compatible with a metric $g$ if and only if
	\[
		X(g(Y,Z)) = g(\nabla_X Y, Z) + g(Y, \nabla_X Z), \quad X, Y, Z \in \mathfrak{X}(M).
	\]
\end{corollary}

\begin{proof}
	The first implication is straightforward, let us see the other one.

	Consider that $\nabla$ is compatible with the metric. Let $p \in M$ and define $c \colon I \subset \R \to M$ to be a smooth curve satisfying
	\[
		c(t_0) = p, \quad t_0 \in I \quad \textrm{and} \quad \frac{dc}{dt} \Bigr|_{t = t_0} = X(p).
	\]
	
	Then,
	\[
		X(p)\left(g(Y,Z)\right) = \frac{d}{dt}g(Y,Z)\Bigr|_{t=t_0} = g(\nabla_{X(p)} Y, Z)_p + g(Y, \nabla_{X(p)} Z)_p,
	\]
	which proves the result, as $p$ is an arbitrary point.
\end{proof}

\begin{definition}[Symmetric connection]
	% doCarmo, 46
	An affine connection $\nabla$ on a smooth manifold $M$ is said to be symmetric if
	\[
		\nabla_X Y - \nabla_Y X = [X, Y] \quad \forall X,Y \in \mathfrak{X}(M).
	\]
\end{definition}

The name chosen for this property may not be clear at first sight, but it is not in vain: if we consider a coordinate system $(U,x)$, the symmetric connections satisfy
\[
	\nabla_{X_i} X_j - \nabla_{X_j} X_i = [X_i, X_j] = 0,
\]
which is equivalent to the symmetric expression
\[
	\Gamma^k_{ij} = \Gamma^k_{ji}.
\]

Note that $\Gamma^k_{ij}$ and $\Gamma^k_{ji}$ are not equal in general. This happens only when $X_i = \pd{}{x^i}$ as we assume here. In this case, the Schwarz lemma shows us that $[X_i, X_j] = 0$; \ie, that $\frac{\partial^2 f}{\partial x^i \partial x^j} = \frac{\partial^2 f}{\partial x^j \partial x^i}$.

We can now state the main theorem for this section, which, paraphrasing Barret O'Neill \cite[p. 60]{oneill83}, it is said to be the miracle of semi-Riemannian geometry.

\begin{theorem}[Levi-Civita connection]
	\label{theo:levicivita}
	% doCarmo, 47
	There exists, for every semi-Riemannian manifold $M$, a unique affine connection $\nabla$ satisfying the following properties:
	\begin{enumerate}
		\item $\nabla$ is symmetric.
		\item $\nabla$ is compatible with the semi-Riemannian metric.
	\end{enumerate}

	The connection $\nabla$ is known as the \emph{Levi-Civita connection}.
\end{theorem}

\begin{proof}
	Assume that such  connection exists; then, if $g$ is the metric on $M$, the following equalities hold:
	\begin{align}
		\label{eq:leviX}
		X g(Y,Z) &= g(\nabla_X Y, Z) + g(Y, \nabla_X Z) \\
		\label{eq:leviY}
		Y g(Z,X) &= g(\nabla_Y Z, X) + g(Z, \nabla_Y X) \\
		\label{eq:leviZ}
		Z g(X,Y) &= g(\nabla_Z X, Y) + g(X, \nabla_Z Y) \\
	\end{align}

	Summing equalities \ref{eq:leviX} and \ref{eq:leviY}, substracting \ref{eq:leviZ} and using the symmetry of $\nabla$:
	\begin{align*}
		&X g(Y,Z) + Y g(Z,X) - Z g(X,Y) = \\
		= &g([X,Z], Y) + g([Y,Z], X) + g([X,Y], Z) + 2g(Z, \nabla_Y X)
	\end{align*}

	Therefore, we can extract an equality that proves that $\nabla$ is uniquely determined by the metric:
	\begin{align}
		\label{eq:koszul}
		g(\nabla_Y X, Z) = -\frac{1}{2} \big(&X g(Y,Z) + Y g(Z,X) - Zg(X,Y) - \\
		\nonumber
		&- g([X,Z], Y) - g([Y,Z], X) - g([X,Y],Z) \big).
	\end{align}

	The proof of its existence is straightforward when defining the connection with \autoref{eq:koszul}, commonly known as the \emph{Koszul formula}.
\end{proof}


\begin{remark}[Christoffel symbols, covariant and usual derivatives]
	% doCarmo, 48
	When considering a coordinate system $(U,x)$, the functions $\Gamma^k_{ij}$ defined before with the expression $\nabla_{x^i}X_j = \sum_k \Gamma^k_{ij} X_k$ are known as the \emph{coefficients of the connection} $\nabla$ on $U$ or, more commonly, as the \emph{Christoffel symbols of the connection}.
	
	From \autoref{eq:koszul} we can write
	\[
		\sum_l \Gamma^l_{ij}g_{lk} = \frac{1}{2} \left( \pd{}{x^i} g_{jk} + \pd{}{x^j} g_{ki} - \pd{}{x^k}g_{ij} \right).
	\]
	
	Taking into account the fact that $g_{km}$ has an inverse, namely $g^{km}$, and using the Einstein summation convention, we obtain the classic expression of the Christoffel symbols of the Levi-Civita connection:
	\begin{equation}
		\label{eq:christoffel}
		\Gamma^m_{ij} = \frac{1}{2} g^{km} \left( \pd{}{x^i} g_{jk} + \pd{}{x^j} g_{ki} - \pd{}{x^k}g_{ij} \right)
	\end{equation}
	
	We can reformulate \autoref{eq:covariantderivative} in terms of the Christoffel symbols, obtaining the covariant derivative classical expression using again the Einstein notation:
	\begin{equation}
		\label{eq:finalcovder}
		\frac{DV}{dt} = X_k \left( \frac{dv^k}{dt} + \Gamma^k_{ij} v^j \frac{d x^i}{dt} \right).
	\end{equation}
\end{remark}

There is still one question left: is the covariant derivative an actual generalization of the directional derivative on the euclidean space $\R^n$? If we inspect \autoref{eq:finalcovder} we realize that the only difference between directional and covariant derivatives is the term where the Christoffel symbols appear. But it is straightforward to see that these terms vanishes when the metric $g$ is euclidean; from \autoref{eq:christoffel}, and using that $g^{ij} = \delta^i_j$ for every $i,j \in \{1, \dots, n\}$:
\begin{align*}
	\Gamma^m_{ij} &= \frac{1}{2} g^{km} \left( \pd{}{x^i} g_{jk} + \pd{}{x^j} g_{ki} - \pd{}{x^k}g_{ij} \right) = \\
	&= \frac{1}{2} \sum_k g^{km} \left( \pd{}{x^i} g_{jk} + \pd{}{x^j} g_{ki} - \pd{}{x^k}g_{ij} \right) = \\
	&= \frac{1}{2} \sum_k \delta^k_m \left( \pd{}{x^i} \delta^j_k + \pd{}{x^j} \delta^k_i - \pd{}{x^k} \delta^i_j \right) = \\
	&= 0
\end{align*}

We can conclude what we state at the beginning of this section: when restricted to the euclidean spaces, the covariant derivative and the directional derivative agree.

\section{Geodesics}

From now on, let $M$ be a semi-Riemannian manifold.

\subsection{Basic definition}

\begin{definition}[Geodesic]
	% doCarmo, 52
	Let $\gamma \colon I \to M$ be a curve on $M$. $\gamma$ is said to be a \emph{geodesic on $M$} when
	\[
		\frac{D}{dt}\left(\frac{d\gamma}{dt}\right) = 0 \quad \forall t \in I,
	\]
	that is, the vector field $\gamma'$ is parallel.
\end{definition}

It is a common abuse of notation, using that the covariant derivative is an actual derivation, to write that a curve $\gamma$ on $M$ is a geodesic when $\gamma'' = 0$.

One milestone on the development of this work is to obtain the equations that characterise geodesics: these kind of equations will let us apply a numerical algorithm in order to obtain positions of particles moving on manifolds. We will see later that a spacetime can be modelled as a 4-dimensional manifold whose geodesics will tell us the path light follows.

As our primary objective is to study the movement of light, this first small step in understanding what a geodesic is and what equation it satisfies is very important.

\begin{remark}[Differential equations satisfied by a geodesic]
	% doCarmo, 53
	Therefore, let us see the local equations satisfied by a geodesic $\gamma$ on on a coordinate system $(U,x)$ around $\gamma(t_0)$, $t_0 \in I$.
	
	Let $\gamma(t) = (x^1(t), \dots, x^n(t)$ be the coordinates of the curve on $U$. Using the expression of the covariant derivative and assuming $\gamma$ is a geodesic; \ie, that its velocity vector field is parallel, we can write:
	\[
		0 = \pd{}{x^k} \left( \frac{d^2x^k}{dt^2} + \Gamma^k_{ij} \frac{d x^i}{dt} \frac{d x^j}{dt} \right).
	\]
	
	We conclude that the differential equations system of order 2 given by
	\begin{equation}
	\label{eq:geodesic}
		\frac{d^2x^k}{dt^2} + \Gamma^k_{ij} \frac{d x^i}{dt} \frac{d x^j}{dt} = 0 \quad k = 1, \dots, n
	\end{equation}
	describes a necessary condition for the curves on $M$ to be geodesics.
\end{remark}

\subsection{Variational characterization of geodesics}

When working with geodesics, its natural, elegant definition, although really interesting for theoretical purposes, is not practical. This section aims to find a characterization that let us study geodesics.

First of all, we need to define some more concepts on curves.

\begin{definition}[Variation {\cite[Ch. 9, Definition 2.1]{docarmo79}}]
	Let $c \colon [0,1] \to M$ be a piecewise smooth curve on a semi-Riemannian manifold $M$. A \emph{variation of $c$} is a continuous map
	\[
		f \colon (-\varepsilon, \varepsilon) \times [0,1] \to M
	\]
	that satisfies:
	\begin{enumerate}
		\item $f(0,t) = c(t), \quad t\in[0,1]$.
		\item There is a partition of $[0,1]$, $0 = t_0 < t_1 < \dots < t_{k+1} = 1$, such that $f_{|(-\varepsilon, \varepsilon) \times [t_i,t_{i+1}]}$ is smooth for every $i = 0, 1, \dots, k$.
	\end{enumerate}

	The variation is said to be \emph{proper} if $f(s,0) = c(0)$ and $f(s,1) = c(1)$ for every $s \in (-\varepsilon, \varepsilon)$.
\end{definition}

\begin{definition}[Variational curve of a $c$]
	Let $f$ be a variation of a piecewise smooth curve $c$ on a semi-Riemannian manifold $M$, and fix an arbitrary $s \in (-\varepsilon, \varepsilon)$.
	
	The curve
	\begin{align*}
		f_s \colon [0,1] &\to M \\
		t &\mapsto f_s(t) \defeq f(s,t)
	\end{align*}
	is called the variational curve of $c$\unsure{$c$ or $f$?}.
\end{definition}

The family of curves $\{f_s\}_{s\in (-\varepsilon, \varepsilon)}$ trivially includes $f_0 = c$, and so it can be considered as a set of close curves to $c$ if $\varepsilon > 0$ is sufficiently small.

Furthermore, tt is clear that the variation is proper if every curve on this family have the same initial point $c(0)$ and the same final point $c(1)$.

\begin{definition}[Transversal curve of variation]\fixme{Curva trasversal de la variaciÃ³n.}
	Let $f$ be a variation of a piecewise smooth curve $c$ on a semi-Riemannian manifold $M$, and fix an arbitrary $t \in [0,1]$.
	
	The curve
	\begin{align*}
		f_t \colon (-\varepsilon, \varepsilon) &\to M \\
		s &\mapsto f_t(s) \defeq f(s,t)
	\end{align*}
is called the sectional curve of $f$ \unsure{$f$ or $c$?}.
\end{definition}

The velocity vector of $f_t$ is
\[
V(t) \defeq \pd{f}{s}(0,t),
\]
which defines a piecewise smooth vector field along $c$: the so-called \emph{variational field} of $f$.

Furthermore, if $f$ is a proper variation, the velocity satisfies $V(0) = 0$ and $V(1) = 0$.

We can define now a quantity minimized by geodesics, in order to find a characterization with which we can work. In a semi-Riemannian manifold, this quantity will be the energy.

\begin{definition}[Energy of a variation]
	\label{def:energy}
	Let $f$ be a variation of a smooth curve $c$ on a manifold $M$
	
	The \emph{energy of $f$} is defined a
	\begin{align*}
		E_f \colon (-\varepsilon, \varepsilon) &\to \R \\
		s &\mapsto E_f(s) \defeq \int_0^1 g \left( \pd{f}{t}(s,t), \pd{f}{t}(s,t) \right) dt,
	\end{align*}
	where $g$ is a metric on $M$ and $\pd{f}{t}(s,t)$ denotes the velocity of $f_s$ on the instant $t$.
\end{definition}

Some interesting properties of the energy function are studied on the following proposition, which will help us to find the characterization we are looking for.

\begin{proposition}
	\label{pro:energyprop}
	Let $c \colon [0,1] \to M$ a piecewise smooth curve and let $f \colon (-\varepsilon, \varepsilon) \times [0,1] \to M$ be a proper variation of $c$.
	
	The energy of $f$, $E_f \colon (-\varepsilon, \varepsilon) \to \R$ satisfies:
	\[
		\frac{1}{2} E'_f(0) = - \int_0^1 g\left( V(t), \frac{D}{dt}\left(\frac{dc}{dt}\right) \right)dt - \sum_{i=1}^k g \left( V(t_i), \frac{dc}{dt}(t_i^+) - \frac{dc}{dt}(t_i^-) \right),
	\]
	where $V$ is the variational field of $f$ and
	\[
		\frac{dc}{dt}(t_i^+) = \lim_{\substack{t \to t_i \\ t > t_i}} \frac{dc}{dt}(t), \quad \frac{dc}{dt}(t_i^-) = \lim_{\substack{t \to t_i \\ t < t_i}} \frac{dc}{dt}(t)
	\]
\end{proposition}
\begin{proof}
	\fixme{Add proof or reference.}
\end{proof}

The characterization of geodesics we are looking for comes as a consequence of \autoref{pro:energyprop}.

\begin{proposition}
	\label{pro:variationalgeodesic}
	A piecewise smooth curve $c \colon [0,1] \to M$ is a geodesic if and only if
	\[
		\frac{dE_f}{ds}(0) = 0 \quad \textrm{ for every $f$, proper variation of $c$}.
	\]
\end{proposition}
\begin{proof}
	\fixme{Add proof or reference.}
\end{proof}

Geodesics are, in short, the critical points of the energy of every proper variation.

\section{Curvature}

\begin{lemma}
	Let $M$ be a semi-Riemannian manifold with Levi-civita connection $\nabla$. The function
	\begin{align*}
		R \colon \mathfrak{X}(M) \times \mathfrak{X}(M) \times \mathfrak{X}(M) &\to \mathfrak{X}(M) \\
		(X, Y, Z) &\mapsto R(X,Y)Z,
	\end{align*}
	defined as
	\[
		R(X,Y)Z = \nabla_X \nabla_Y Z - \nabla_Y \nabla_X Z - \nabla_{[X,Y]} Z,
	\]
	is a $(1,3)$ tensor field on $M$ called the \emph{Riemannian curvature of M}.
\end{lemma}

\begin{proof}
	To see the curvature $R$ as a $(1,3)$ tensor consider the function defined as
		\begin{align*}
		\tilde{R} \colon \mathfrak{X}(M)^* \times \mathfrak{X}(M) \times \mathfrak{X}(M) \times \mathfrak{X}(M) &\to \mathfrak{X}(M) \\
		(\Omega, X, Y, Z) &\mapsto \Omega\left(R(X,Y)Z\right)
	\end{align*}
	It is straightforward to see that $\tilde{R}$, that will be denoted also as $R$, is multilinear and can factor out its scalars.
\end{proof}

The Riemannian curvature can be considered as an $\R$-multilinear function ay any $p\in M$ working on individual tangent vectors.

\begin{remark}[Curvature tensor on tangent vectors]	
	If $u,v,w \in T_pM$ and $U,V,W \in \mathfrak{X}(\Omega)$, where $\Omega$ is some open neighbourhood of $p$ such that
	\[
		U_p = u, \qquad V_p = v, \qquad W_p = w,
	\]
	then $\left( R(U,V)W \right) _p$ does not depend on the local extensions of the tangent vectors at $p\in M$ \cite[p. 38]{oneill83}, and therefore we can define
	\begin{align*}
		R \colon T_p M \times T_p M  \times T_p M  &\to T_p M \\
		(u,v,w) &\mapsto R(u,v)w \defeq \left(R(U,V)W\right)_p
	\end{align*}
	In particular, for any $u,v \in T_p M$ we have a linear operator
	\[
	R(u,v) \colon T_p M  \to T_p M \\
	\]
	sending each $w\in T_pM$ to $R(u,v)w \in T_p M$, which is called the \emph{curvature operator} defined by $u,v\in T_p M$.
\end{remark}

Let us compute the expression of the curvature tensor components. Consider that its coordinate expression is:
\begin{equation}
\label{eq:curvaturecomponents}
R\left( \pd{}{x^i}, \pd{}{x^j} \right)\pd{}{x^k} = \sum_l R^l_{ijk} \pd{}{x^l}.
\end{equation}

Using the curvature tensor definition and the Schwarz lemma, that tells us that $[\pd{}{x^i}, \pd{}{x^j}] = 0$, the tensor has the expression
\[
R\left( \pd{}{x^i}, \pd{}{x^j} \right)\pd{}{x^k} = \nabla_{\pd{}{x^i}} \nabla_{\pd{}{x^j}} \pd{}{x^k} - \nabla_{\pd{}{x^j}} \nabla_{\pd{}{x^i}} \pd{}{x^k}.
\]

Let us compute the first term in details; the second one will have the same expression with swapped indices $i$ and $j$. Using the Christoffel symbols, we have
\[
\nabla_{\pd{}{x^j}} \pd{}{x^k} = \sum_h \Gamma^h_{jk} \pd{}{x^h},
\]
from where we can write
\begin{align*}
\nabla_{\pd{}{x^i}} \left( \nabla_{\pd{}{x^j}} \pd{}{x^k} \right) &= \sum_h \nabla_{\pd{}{x^i}} \Gamma^h_{jk} \pd{}{x^h} = \\
&= \sum_h \pd{}{x^i} \Gamma^h_{jk} \pd{}{x^h} + \sum_h \Gamma^h_{jk} \nabla_{\pd{}{x^i}} \pd{}{x^h} =\\
&= \sum_h \pd{}{x^i} \left( \Gamma^h_{jk} \right) \pd{}{x^h} + \sum_{h,p} \Gamma^h_{jk} \Gamma^p_{ih} \pd{}{x^p}.
\end{align*}

If we swap the indices $h$ and $p$ on the last addend, the expression of this one term is somewhat more clear:
\begin{equation}
\label{eq:curvatureexpression}
\nabla_{\pd{}{x^i}}\nabla_{\pd{}{x^j}} \pd{}{x^k} = \sum_h\left( \pd{}{x^i} \Gamma^h_{jk} + \sum_p \Gamma^p_{jk} \Gamma^h_{ip} \right) \pd{}{x^h}
\end{equation}

From \autoref{eq:curvaturecomponents}, using \autoref{eq:curvatureexpression} and its analogous with $i$ and $j$ indices swapped, we can finally write the expression of the curvature tensor components:
\[
R^l_{ijk} = \pd{}{x^i} \Gamma^l_{jk} - \pd{}{x^j} \Gamma^l_{ik} + \sum_p \left( \Gamma^p_{jk} \Gamma^l_{ip} - \Gamma^p_{ik} \Gamma^l_{jp} \right)
\]

The following identities are the symmetries of $R$:

\begin{proposition}
	If $u,v,w,z \in T_p M$, then
	\begin{enumerate}
		\item $R(u,v) = -R(v,u)$ as operators on $T_p M$.
		\item $g(R(u,v)w, z) = -g(R(u,v)z, w)$.
		\item $R(u,v)w +R(v,w)u + R(w,u)v = 0$ (\emph{first Bianchi identity}).
		\item $g(R(u,v)w,z)  = g(R(w,z)u, v)$.
	\end{enumerate}
\end{proposition}

These symmetries of $R$ lead to a less obvious symmetry of its covariant derivative $\nabla R$, called the \emph{second Bianchi identity}. First, let us recall that $\nabla R$ is the $(1,4)$-tensor field defined by
\begin{align*}
	\left( \nabla_U R \right)(X,Y)Z = &\nabla_U(R(X,Y)Z) - R(\nabla_U X, Y)Z - \\
	&-R(X, \nabla_U Y)Z - R(X,Y) \nabla_U Z
\end{align*}
for all $U,X,Y,Z \in \mathfrak{X}(M)$.

\begin{definition}[Ricci tensor]
	The Ricci tensor $\Ric$ of a semi-Riemannian metric $g$ is defined as the following contraction of the Riemann curvature tensor $R$ of $g$:
	\[
		\Ric(X,Y) \defeq \operatorname{trace}(V \mapsto R(V, X)Y ),
	\]
	that is, $\Ric(X,Y) =  \sum_i \omega^i (R(X_i, X)Y)$; where $\{X_i\}$ is a local basis of vector fields and $\{\omega^i\}$ is its dual basis of one-forms.
\end{definition}

Therefore, for a coordinate system $(x_1, \dots, x_n)$ we have
\[
	\Ric = \sum_{j,k} \Ric\left( \pd{}{x^j},\pd{}{x^j}  \right) dx^j \otimes dx^k,
\]
where the components $\Ric(\pd{}{x^j}, \pd{}{x^k})$ of $\Ric$ are given by
\[
	\Ric(\pd{}{x^j}, \pd{}{x^k}) = \sum_i dx^i \left( R(\pd{}{x^i}, \pd{}{x^j})\pd{}{x^k} \right) = \sum_i R^i_{ijk}.
\]

Equivalently,
\[
	\Ric(X,Y)  = \sum_{i,h} g^{ih} g(R(\pd{}{x^i}, X)Y, \pd{}{x^h}).
\]

\begin{definition}[Scalar curvature]
	The \emph{scalar curvature} $S$ of $g$ is the contraction of the $(1,1)$ tensor field $g$-equivalent to the Ricci tensor. In terms of coordinates:
	\[
		S = \sum_{i,j} g^{ij}(\Ric)_{ij} = \sum_{i,j,k} g^{ij} R^k_{kij}
	\]
\end{definition}

From the second identity of Bianchi we get \cite[p. 88]{oneill83}
\[
	\nabla S = 2 \operatorname{div} \widehat{\Ric},
\]
where $\nabla S$ is the gradient of te scalar curvature, $\widehat{\Ric}$ is the contravariant tensor field $g$-equivalent to $\Ric$ and $\operatorname{div}$ is the divergence acting on symmetric $(2,0)$ tensor fields.

\section{Killing Vectors Fields}
\fixme{Add references to Oneill}

\begin{definition}[Integral curve]
	Let $M$ be a smooth manifold and consider a vector field $X \in \mathcal{X}(M)$.
	An integral curve of $X$ is a curve
	\[
		\gamma \colon I \to M,
	\]
	where $I$ is an open interval of $\R$ with $0 \in I$, such that
	\begin{equation}
		\label{eq:integralcurve}
		\gamma'(t) = X_{\gamma(t)} \quad \forall t \in I,
	\end{equation}
	that is, the vector field $X$ assigns to every point of the curve its own velocity at that instant.
\end{definition}

\begin{lemma}
	Let $p_0 \in M$ be a point on a smooth manifold. There exists a unique (maximal) integral curve of $X\in\mathcal{X}(M)$, $\gamma \colon I \to M$, such that
	\begin{equation}
		\label{eq:initcond}
		\gamma(0) = p_0.
	\end{equation}
\end{lemma}

We are now able to see that an integral curve starting at a point on $M$ can be seen as the solution to the differential equation described by \autoref{eq:integralcurve} restricted to the initial conditions given by \autoref{eq:initcond}.

\begin{lemma}
	Consider a vector field $X \in \mathcal{X}(M)$ and a point $p_0 \in M$. Then, there exists $U$, an open neighbourhood of $p_0$ at $M$, a number $\varepsilon > 0$ and a smooth function
	\[
		\varphi \colon (-\varepsilon, \varepsilon) \times U \to M,
	\]
	such that for any $q \in U$, the map
	\[
		t \mapsto \varphi(t,q)
	\]
	is the integral curve of $X$ starting at $q$; \ie, $\varphi$ is the general solution of the differential equation \ref{eq:integralcurve}.
	
	The solution $\{\varphi_t\}_{t \in (-\varepsilon, \varepsilon)}$ is known as \emph{a local flow of $X$}.
\end{lemma}

\begin{definition}[Killing vector field]
	Let $(M,g)$ be a semi-Riemannian manifold, and consider a vector field $X\in\mathcal{X}(M)$.
	
	$X$ is said to be a Killing vector field if every local flow $\{\varphi_t\}$ of $X$ satisfies that
	\[
		\varphi_t \colon U \to \varphi_t(U)
	\]
	is an isometry.
\end{definition}

When $X$ is a Killing vector field, $g$ does not change under the action of any flow of $X$; \ie, $\varphi^*_t g = g$.

Before finding an interesting characterization of the Killing vector fields, it is necessary to introduce an important concept: the Lie derivative.

\begin{definition}[Lie derivative]
	Let $(M,g)$ be a semi-Riemannian manifold and let $X\in\mathcal{X}(M)$ be a vector field on $M$. The \emph{Lie derivative of $g$ with respect to $X$} is a function acting on pairs of smooth vector fields $Y,Z \in \mathcal{X}(M)$ defined by:
	\begin{equation}
	\label{eq:liederivative}
		(L_Xg)(Y,Z) = Xg(Y,Z) - g([X,Y],Z) - g(Y,[X,Z])
	\end{equation}
\end{definition}

\begin{proposition}[Killing vector fields characterisation]
	\label{pro:killingchar}
	A vector field $X \in \mathcal{X}(M)$ on a semi-Riemannian manifold $(M,g)$ is a Killing vector field if and only if
	\[
		L_X g = 0,
	\]
	where $L_X$ is the Lie derivative with respect to $X$.
\end{proposition}

We can rewrite the Lie derivative to better work with it. Using \autoref{eq:leviX} and the identity $[X,Y] = \nabla_X Y - \nabla_Y X$, \autoref{eq:liederivative} is equivalent to
\begin{equation}
	\label{liederivative2}
	(L_Xg)(Y,Z) = g(\nabla_Y X, Z)) + g(Y, \nabla_Z X).
\end{equation}

Using this definition of Lie derivative and \autoref{pro:killingchar}, we can now conclude that $X \in \mathcal{X}(M)$ is a Killing vector field if and only if
\begin{equation}
	\label{eq:liecharacterisation}
	g(\nabla_Y X, Z) + g(Y, \nabla_Z X) = 0 \quad \forall X,Y\in\mathcal{X}(M).
\end{equation}

\begin{proposition}
	Let $X\in\mathcal{X}(M)$ be a Killing vector field on a semi-Riemannian manifold $(M,g)$ and considet $\gamma$ a geodesic on $M$. Then,
	\[
		g(\gamma'(t), X_{\gamma(t)}) = c,
	\]
	where $c\in\R$ depends only on $\gamma$.
\end{proposition}

\begin{proof}
	Indeed, using that $\frac{D\gamma'}{dt} = 0$ and \autoref{eq:liecharacterisation}:
	\begin{align*}
		\frac{d}{dt} g\left(\gamma'(t),X_{\gamma(t)}\right) = g\biggl(\frac{D\gamma'}{dt}, X_{\gamma(t)}\biggr) + g\left(\gamma'(t), \nabla_{\gamma'(t)}X\right) = 0.
	\end{align*}
\end{proof}